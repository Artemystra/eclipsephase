
<div class="alignCenter">

  {{#if (eq type "damage")}}
  <div class="alignCenter">
    <p>{{localize "ep2e.roll.announce.combat.hit"}} <span class="resource-value"></span></p>

    <p></p><div style="display: block; margin: 0 0 20px 0; padding: 25px 0; background-color: var(--pitchBorder);">
      <span><b>{{weaponName}}</b></span><br>
      {{#if ammoLoadedName}}
        <span style="font-size: 14px;">{{localize "ep2e.item.general.table.slot.ammo"}}:<br>({{ammoLoadedName}})</span>
      {{/if}}
    </div>

    {{#if weaponTraits}}
      <div class="item" style="cursor: pointer; background-color: var(--focusBackground); padding: 0.25em 0;">
        <div class="showFlex" style="padding: 0 10px; justify-content: space-between;">
          <strong>{{localize "ep2e.roll.announce.combat.additionalEffects"}}</strong>
        </div>
        <div>
          <table style="margin-bottom: 0;">
            {{#each weaponTraits as |trait key|}}
              {{#if trait.value}}
              <tr>
                <td class="table-dice-label" style="display: flex;">
                  {{localize trait.name}}
                  {{#if (eq key "dvOnMiss")}}
                    <span style="font-size: 13px;"> ({{trait.calculated}})</span>
                  {{else if (eq key "knockdown")}}
                    {{#if trait.radius}}
                      <div class="wantToKnowMore" style="display: flex; align-items: center;">
                        <img src="systems/eclipsephase/resources/icons/radius.webp" class="icon-xsmall icon-space" style="margin-left: 5px;"/>
                        <span class="tooltipText" style="font-size: 13px;">{{localize "ep2e.item.weapon.table.radius"}}</span>
                        <span style="font-size: 13px;"> {{trait.radius}}</span>
                      </div>
                    {{/if}}
                  {{/if}}
                </td>
                {{#if (eq key "effectRadius")}}
                  <td class="table-dice-result">
                    <a class="moreInfoDialog" data-description="ep2e.rule.weapon.effect.{{key}}" data-title="{{trait.name}}" data-value="{{trait.radius}}" data-rolledfrom="info">
                        <i class="fa-regular fa-circle-info" id="moreInfo"></i>
                    </a>
                  </td>
                {{else}}
                  <td class="table-dice-result">
                    <a class="moreInfoDialog" data-description="ep2e.rule.weapon.effect.{{key}}" data-title="{{trait.name}}" data-rolledfrom="info">
                        <i class="fa-regular fa-circle-info" id="moreInfo"></i>
                    </a>
                  </td>
                {{/if}}
              </tr>
              {{/if}}
            {{/each}}
          </table>
        </div>
    {{/if}}
    
    {{#if total}}
    {{> systems/eclipsephase/templates/chat/partials/roll-results.html targetNumber=targetNumber diceBreakdown=diceBreakdown formula=formula total=total resultClass=resultClass rollType=rollType}}
    {{/if}}

  {{/if}}

  {{#if (eq type "weaponBreak")}}
  <div class="alignCenter">
    <p>{{localize copy}} <span class="resource-value"></span></p>

    <div style="display: block; margin: 0 0 20px 0; padding: 25px 0; background-color: var(--pitchBorder);">
      <span><b>{{weaponName}}</b></span>
    </div>
  </div>
  {{/if}}

  {{#if (eq type "reload")}}
  <div style="margin-bottom: 30px;">
    <p>{{{localize copy}}}</p>

    <p></p><div style="display: block; margin: 0 0 20px 0; padding: 25px 0; background-color: var(--pitchBorder);">
      <span><b>{{weaponName}}</b></span><br>
      {{#if ammoLoadedName}}
        <span style="font-size: 14px;">{{localize "ep2e.item.general.table.slot.ammo"}}:<br>({{ammoLoadedName}})</span>
      {{/if}}
    </div>
  </div>
  {{/if}}

  {{#if (eq type "psiDamage")}}
  <div class="alignCenter">
    <div style="display: block; margin: 0 0 20px 0; padding: 25px 0; background-color: var(--pitchBorder);">
      <span><b>{{localize "ep2e.psi.effect.physicalDamage"}} {{psiDamageValue}}</b></span>
    </div>
  </div>
  {{/if}}

</div>